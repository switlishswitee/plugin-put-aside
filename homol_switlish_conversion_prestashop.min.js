function getSwitlishCookie(cname) { var name = cname + "="; var decodedCookie = decodeURIComponent(document.cookie); var ca = decodedCookie.split(';'); for(var i = 0; i <ca.length; i++) { var c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; }

window.dataLayer = window.dataLayer || [];

function switlishTransactionComplete(dataLayerVar, sw_transaction) {

	var currencyCode = 'EUR';
	var product_tab = [];
	var line_item = null;

	for (var i = 0; i <  sw_transaction.products.length; i++) {
		line_item = sw_transaction.products[i];
		product_tab.push({
			'sku': line_item.product_id,
			'name': line_item.product_name,
			'category': line_item.product_reference,
			'price': parseFloat(parseFloat(line_item.total_price_tax_incl)/parseFloat(line_item.product_quantity)),
			'quantity': parseInt(line_item.product_quantity),
			'currency': currencyCode,
		});
	}

	dataLayerVar.push({
		'event' : 'switlishTransactionComplete',
		'transactionId': sw_transaction.id,
		'transactionTotal': parseFloat(sw_transaction.total_paid_tax_incl),
		'transactionCurrency': currencyCode,
		'transactionShipping': parseFloat(sw_transaction.total_shipping_tax_incl),
		'transactionTax': parseFloat(sw_transaction.total_tax),
		'transactionAffiliation': getSwitlishCookie('affiliate_id'),
		'transactionProducts': product_tab,
	});
};

switlishTransactionComplete(window.dataLayer, sw_transaction);
  
//# sourceMappingURL=homol_switlish_conversion_prestashop.min.js
