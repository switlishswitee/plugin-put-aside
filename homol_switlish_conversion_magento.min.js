function getSwitlishCookie(cname) { var name = cname + "="; var decodedCookie = decodeURIComponent(document.cookie); var ca = decodedCookie.split(';'); for(var i = 0; i <ca.length; i++) { var c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; }


function transactionComplete(dataLayerVar, switlishTransactionTab) {
	
	for (var j = 0; j <  switlishTransactionTab.length; j++) {

		var product_tab = [];
		var switlishTransaction = switlishTransactionTab[j];

		console.log('switlishTransaction ', switlishTransaction );

		for (var i = 0; i <  switlishTransaction.products.length; i++) {
		 
			line_item = switlishTransaction.products[i];
			 
			product_tab.push({
				'sku': line_item.product_sku,
				'name': line_item.product_name,
				'category': line_item.product_category,
				'price': line_item.product_price,
				'quantity': parseInt(line_item.product_quantity),
				'currency': line_item.product_currency,
			});
		}
		
	
		dataLayerVar.push({
			'event' : 'switlishTransactionComplete',
			'transactionId': switlishTransaction.id,
			'transactionTotal': parseFloat(switlishTransaction.total),
			'transactionCurrency': switlishTransaction.currency,
			'transactionShipping': parseFloat(switlishTransaction.shipping_total),
			'transactionTax': parseFloat(switlishTransaction.total_tax),
			'transactionAffiliation': getSwitlishCookie('affiliate_id'),
			'transactionProducts': product_tab,
		});
	}
	
};

(function($){
$(document).ready(function() {

	window.dataLayer = window.dataLayer || [];

	transactionComplete(window.dataLayer, switlishTransactionTab);
});
})(jQuery);
  
//# sourceMappingURL=homol_switlish_conversion_magento.min.js
